<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<script type="text/javascript">
			function userNameChanged() {
				document.getElementById("labelUserName").style.display='none';
			}
			function passwordChanged() {
				document.getElementById("labelPassword").style.display='none';
			}
			function loginSubmit() {
				var userName = document.getElementsByName("textUserName");
				var password = document.getElementsByName("textPassword");
				if(!userName[0].value) {
					document.getElementById("labelUserName").style.display='inline';
					return;
				}
				if(!password[0].value) {
					document.getElementById("labelPassword").style.display='inline';
					return;
				}
				var webServiceURL="";
				//Get the current page and domain information so that we know where the location of the web service is.
				var pageName=window.location.href.substring(window.location.href.lastIndexOf("/")+1);
				var domainName=window.location.href.split(pageName)[0];
				//Set the action to call the local web service's method ProcessLoginRequestLocal.  Example: https://www.supersmiledentist.com:52441/ServiceMain.asmx/ProcessLoginRequestLocal
				webServiceURL=domainName+"ServiceMain.asmx/ProcessLoginRequestLocal";
				//Read in the ID parameter that each office is required to pass in the URL so that we know which office is trying to log in.
				var urlParams=window.location.search.substring(1);
				//Check if the URL contained any parameters.
				if(urlParams.length>1) {
					var params=urlParams.split("&");
					//Since urlParams had a length, params[0] will never be invalid.
					var custID=params[0].split("=");
					//The URL contained a parameter that was not labeled id so show an error message stating so.
					if(custID[0]!="id") {
						document.getElementById("labelCustID").style.display='block';
						return;
					}
					document.getElementById("custID").value=custID[1];
					//The action needs to be redirected to our web service which will always be hard coded.
					webServiceURL="https://localhost:52441/ServiceMain.asmx/ProcessLoginRequestHQ";
				}
				var formLogin=document.getElementById("formLogin");
				formLogin.action=webServiceURL;
				formLogin.submit();
			}
		</script>
		<noscript>
			Sorry, your browser does not support JavaScript!  Please install a browser that is JavaScript compatible or enable JavaScript in your browser settings.
		</noscript>
	</head>
	<body>
		<form name="formLogin" id="formLogin" method="POST" onSubmit="javascript:loginSubmit();" style="position:fixed;top:30px;left:30px;">
			<!-- This is just an invisible input field that will get filled with the office ID if one was passed in the URL when submitted.  -->
			<input type="hidden" name="custID" id="custID" value="" />
			<span id="labelCustID" style="display:none;color:#FF0000;"><label>Customer id was not passed in the URL correctly.  Users cannot log in until the URL includes the office id.  URL should end like '?id=###', where ### is the office id.</label></span>
			User Name  
			<br><input type="text" name="textUserName" onchange="javascript:userNameChanged();"><span id="labelUserName" style="display:none;color:#FF0000;"><label>User Name cannot be blank.</label></span>
			<br>Password  
			<br><input type="password" name="textPassword" onchange="javascript:passwordChanged();"><span id="labelPassword" style="display:none;color:#FF0000;"><label>Password cannot be blank.</label></span>
			<br>
			<br><input type="button" id="butSubmit" value="Login" onclick="javascript:loginSubmit();">
		</form>
	</body>
</html> 
